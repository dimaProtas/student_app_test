{"ast":null,"code":"import axios from \"axios\";\nimport { selectAccessToken } from \"../reduser/selectors.js\";\nlet store;\nexport const setStore = s => {\n  store = s;\n};\nexport const instans = axios.create({\n  withCredentials: true,\n  baseURL: 'http://localhost:8000/api/'\n});\nexport const configureAxiosInterceptors = () => {\n  // Добавляем interceptor для автоматического добавления токена в заголовок запроса\n  instans.interceptors.request.use(config => {\n    const token = selectAccessToken(store.getState()); // Получаем токен из State\n    if (token) {\n      config.headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n};\nexport const dataAPI = {\n  deleteSemester(semester_id) {\n    return instans.delete(`semestr/${semester_id}/`);\n  },\n  deleteCurse(curse_id) {\n    return instans.delete(`curses/${curse_id}/`);\n  },\n  deleteStudent(student_id) {\n    return instans.delete(`students/${student_id}/`);\n  },\n  getTefchers(name_teacher, last_name_teacher, rank_teacher) {\n    return instans.get(`teachers/?name_teacher=${name_teacher}&last_name_teacher=${last_name_teacher}&rank_teacher=${rank_teacher}`);\n  },\n  getStudent(name, last_name) {\n    return instans.get(`students/?name=${name}&last_name=${last_name}`);\n  },\n  postStudent(name, last_name) {\n    return instans.post(`students/`, {\n      name,\n      last_name\n    });\n  },\n  getCurses(name_curses, num_curses) {\n    return instans.get(`curses/?name_curses=${name_curses}&num_curses=${num_curses}`);\n  },\n  getSemester() {\n    return instans.get(`semestr/`);\n  },\n  getSemesterCurses() {\n    return instans.get(`semester_curses/`);\n  }\n};\nconst authAPI = {\n  authMe(refreshToken) {\n    let result = instans.post(`token/refresh/`, {\n      refresh: refreshToken\n    });\n    return result;\n  },\n  getAythUser() {\n    return instans.get(`user/`);\n  },\n  registerUser(username, first_name, last_name, email, password) {\n    let result = instans.post(`register/`, {\n      username,\n      first_name,\n      last_name,\n      email,\n      password\n    });\n    return result;\n  },\n  loginUser(username, password) {\n    let result = instans.post(\"token/obtain/\", {\n      username,\n      password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return result;\n  },\n  logout() {\n    return instans.delete(\"auth/logout/\");\n  },\n  refreshToken(refreshToken) {\n    let result = instans.post(\"token/refresh/\", {\n      refresh: refreshToken\n    });\n    return result;\n  }\n};\nexport default authAPI;","map":{"version":3,"names":["axios","selectAccessToken","store","setStore","s","instans","create","withCredentials","baseURL","configureAxiosInterceptors","interceptors","request","use","config","token","getState","headers","error","Promise","reject","dataAPI","deleteSemester","semester_id","delete","deleteCurse","curse_id","deleteStudent","student_id","getTefchers","name_teacher","last_name_teacher","rank_teacher","get","getStudent","name","last_name","postStudent","post","getCurses","name_curses","num_curses","getSemester","getSemesterCurses","authAPI","authMe","refreshToken","result","refresh","getAythUser","registerUser","username","first_name","email","password","loginUser","logout"],"sources":["/home/dima_protasevich/Documents/PycharmProjects/student_app_test/frontend/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\nimport { selectAccessToken } from \"../reduser/selectors.js\";\n\nlet store;\n\nexport const setStore = (s) => {\n  store = s;\n};\n\nexport const instans = axios.create({\n    withCredentials: true,\n    baseURL: 'http://localhost:8000/api/'\n})\n\n\nexport const configureAxiosInterceptors = () => {\n  // Добавляем interceptor для автоматического добавления токена в заголовок запроса\n  instans.interceptors.request.use(\n    (config) => {\n      const token = selectAccessToken(store.getState()); // Получаем токен из State\n      if (token) {\n        config.headers[\"Authorization\"] = `Bearer ${token}`;\n      }\n\n      return config;\n    },\n    (error) => {\n      return Promise.reject(error);\n    }\n  );\n};\n\nexport const dataAPI = {\n  deleteSemester(semester_id) {\n    return instans.delete(`semestr/${semester_id}/`);\n  },\n\n  deleteCurse(curse_id) {\n    return instans.delete(`curses/${curse_id}/`);\n  },\n\n  deleteStudent(student_id) {\n    return instans.delete(`students/${student_id}/`);\n  },\n\n  getTefchers(name_teacher, last_name_teacher, rank_teacher) {\n    return instans.get(\n      `teachers/?name_teacher=${name_teacher}&last_name_teacher=${last_name_teacher}&rank_teacher=${rank_teacher}`\n    );\n  },\n\n  getStudent(name, last_name) {\n    return instans.get(`students/?name=${name}&last_name=${last_name}`);\n  },\n\n  postStudent(name, last_name) {\n    return instans.post(`students/`, {name, last_name})\n  },\n\n  getCurses(name_curses, num_curses) {\n    return instans.get(\n      `curses/?name_curses=${name_curses}&num_curses=${num_curses}`\n    );\n  },\n\n  getSemester() {\n    return instans.get(`semestr/`);\n  },\n\n  getSemesterCurses() {\n    return instans.get(`semester_curses/`);\n  },\n};\n\n\nconst authAPI = {\n  authMe(refreshToken) {\n    let result = instans.post(`token/refresh/`, { refresh: refreshToken });\n    return result;\n  },\n\n  getAythUser() {\n    return instans.get(`user/`);\n  },\n\n  registerUser(username, first_name, last_name, email, password) {\n    let result = instans.post(`register/`, {\n      username,\n      first_name,\n      last_name,\n      email,\n      password,\n    });\n    return result;\n  },\n\n  loginUser(username, password) {\n    let result = instans.post(\n      \"token/obtain/\",\n      { username, password },\n      { headers: { \"Content-Type\": \"application/json\" } }\n    );\n    return result;\n  },\n\n  logout() {\n    return instans.delete(\"auth/logout/\");\n  },\n\n  refreshToken(refreshToken) {\n    let result = instans.post(\"token/refresh/\", { refresh: refreshToken });\n    return result;\n  },\n}; \n\n\n\n\n\nexport default authAPI\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}