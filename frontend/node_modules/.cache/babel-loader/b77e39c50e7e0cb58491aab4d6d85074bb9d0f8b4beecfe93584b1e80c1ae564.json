{"ast":null,"code":"import axios from \"axios\";\nimport { selectAccessToken } from \"../reduser/selectors.js\";\nexport const instans = axios.create({\n  withCredentials: true,\n  // baseURL: 'https://social-network.samuraijs.com/api/1.0/',\n  // headers: {'API-KEY': '326b0522-c61e-4d4e-a7df-aae77c6de2db'}\n  baseURL: 'http://127.0.0.1:8000/api/'\n});\n\n// Добавляем interceptor для автоматического добавления токена в заголовок запроса\ninstans.interceptors.request.use(config => {\n  const token = selectAccessToken(\"accessToken\"); // Получаем токен из localStorage\n  // const refreshToken = localStorage.getItem('refreshToken'); // Получаем токен из localStorage\n  // console.log('Access token retrieved from localStorage:', `Bearer ${token}`);\n  // console.log('refreshToken', `Bearer ${refreshToken}`);\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\nconst authAPI = {\n  authMe() {\n    return instans.get(`user/`);\n  },\n  registerUser(fullName, login, email, password, repidPassword) {\n    let result = instans.post(`register/`, {\n      full_name: fullName,\n      username: login,\n      email,\n      password,\n      repidPassword\n    });\n    return result;\n  },\n  loginUser(email, password) {\n    // console.log(email, password)\n    let result = instans.post(\"user/\", {\n      email,\n      password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return result;\n  },\n  logout() {\n    return instans.delete(\"auth/logout/\");\n  },\n  refreshToken(refreshToken) {\n    let result = instans.post(\"token/refresh/\", {\n      refresh: refreshToken\n    });\n    return result;\n  }\n};\nexport const securityAPI = {\n  getCaptchaUrl() {\n    return instans.post('security/get-captcha-url');\n  }\n};\nexport default authAPI;","map":{"version":3,"names":["axios","selectAccessToken","instans","create","withCredentials","baseURL","interceptors","request","use","config","token","headers","error","Promise","reject","authAPI","authMe","get","registerUser","fullName","login","email","password","repidPassword","result","post","full_name","username","loginUser","logout","delete","refreshToken","refresh","securityAPI","getCaptchaUrl"],"sources":["/home/dima_protasevich/Documents/PycharmProjects/student_app_test/frontend/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\nimport { selectAccessToken } from \"../reduser/selectors.js\";\n\nexport const instans = axios.create({\n    withCredentials: true,\n    // baseURL: 'https://social-network.samuraijs.com/api/1.0/',\n    // headers: {'API-KEY': '326b0522-c61e-4d4e-a7df-aae77c6de2db'}\n    baseURL: 'http://127.0.0.1:8000/api/'\n})\n\n\n// Добавляем interceptor для автоматического добавления токена в заголовок запроса\ninstans.interceptors.request.use(config => {\n    const token = selectAccessToken(\"accessToken\"); // Получаем токен из localStorage\n    // const refreshToken = localStorage.getItem('refreshToken'); // Получаем токен из localStorage\n    // console.log('Access token retrieved from localStorage:', `Bearer ${token}`);\n    // console.log('refreshToken', `Bearer ${refreshToken}`);\n    if (token) {\n        config.headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    return config;\n}, error => {\n    return Promise.reject(error);\n});\n\n\nconst authAPI = {\n  \n  authMe() {\n    return instans.get(`user/`);\n  },\n\n  registerUser(fullName, login, email, password, repidPassword) {\n    let result = instans.post(`register/`, {\n      full_name: fullName,\n      username: login,\n      email,\n      password,\n      repidPassword,\n    });\n    return result;\n  },\n\n  loginUser(email, password) {\n    // console.log(email, password)\n    let result = instans.post(\n      \"user/\",\n      { email, password },\n      { headers: { \"Content-Type\": \"application/json\" } }\n    );\n    return result;\n  },\n\n  logout() {\n    return instans.delete(\"auth/logout/\");\n  },\n\n  refreshToken(refreshToken) {\n    let result = instans.post(\"token/refresh/\", { refresh: refreshToken });\n    return result;\n  },\n}; \n\n\nexport const securityAPI = {\n    getCaptchaUrl() {\n        return instans.post('security/get-captcha-url');\n    }\n} \n\n\n\n\nexport default authAPI\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,iBAAiB,QAAQ,yBAAyB;AAE3D,OAAO,MAAMC,OAAO,GAAGF,KAAK,CAACG,MAAM,CAAC;EAChCC,eAAe,EAAE,IAAI;EACrB;EACA;EACAC,OAAO,EAAE;AACb,CAAC,CAAC;;AAGF;AACAH,OAAO,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EACvC,MAAMC,KAAK,GAAGT,iBAAiB,CAAC,aAAa,CAAC,CAAC,CAAC;EAChD;EACA;EACA;EACA,IAAIS,KAAK,EAAE;IACPD,MAAM,CAACE,OAAO,CAAC,eAAe,CAAC,GAAI,UAASD,KAAM,EAAC;EACvD;EAEA,OAAOD,MAAM;AACjB,CAAC,EAAEG,KAAK,IAAI;EACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;AAGF,MAAMG,OAAO,GAAG;EAEdC,MAAMA,CAAA,EAAG;IACP,OAAOd,OAAO,CAACe,GAAG,CAAE,OAAM,CAAC;EAC7B,CAAC;EAEDC,YAAYA,CAACC,QAAQ,EAAEC,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,aAAa,EAAE;IAC5D,IAAIC,MAAM,GAAGtB,OAAO,CAACuB,IAAI,CAAE,WAAU,EAAE;MACrCC,SAAS,EAAEP,QAAQ;MACnBQ,QAAQ,EAAEP,KAAK;MACfC,KAAK;MACLC,QAAQ;MACRC;IACF,CAAC,CAAC;IACF,OAAOC,MAAM;EACf,CAAC;EAEDI,SAASA,CAACP,KAAK,EAAEC,QAAQ,EAAE;IACzB;IACA,IAAIE,MAAM,GAAGtB,OAAO,CAACuB,IAAI,CACvB,OAAO,EACP;MAAEJ,KAAK;MAAEC;IAAS,CAAC,EACnB;MAAEX,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB;IAAE,CACpD,CAAC;IACD,OAAOa,MAAM;EACf,CAAC;EAEDK,MAAMA,CAAA,EAAG;IACP,OAAO3B,OAAO,CAAC4B,MAAM,CAAC,cAAc,CAAC;EACvC,CAAC;EAEDC,YAAYA,CAACA,YAAY,EAAE;IACzB,IAAIP,MAAM,GAAGtB,OAAO,CAACuB,IAAI,CAAC,gBAAgB,EAAE;MAAEO,OAAO,EAAED;IAAa,CAAC,CAAC;IACtE,OAAOP,MAAM;EACf;AACF,CAAC;AAGD,OAAO,MAAMS,WAAW,GAAG;EACvBC,aAAaA,CAAA,EAAG;IACZ,OAAOhC,OAAO,CAACuB,IAAI,CAAC,0BAA0B,CAAC;EACnD;AACJ,CAAC;AAKD,eAAeV,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}