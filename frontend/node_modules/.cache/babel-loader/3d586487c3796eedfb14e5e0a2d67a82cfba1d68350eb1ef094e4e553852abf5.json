{"ast":null,"code":"import axios from \"axios\";\nimport { selectAccessToken } from \"../reduser/selectors.js\";\nlet store;\nexport const setStore = s => {\n  store = s;\n};\nexport const instans = axios.create({\n  withCredentials: true,\n  baseURL: 'http://127.0.0.1:8000/api/'\n});\nexport const configureAxiosInterceptors = () => {\n  // Добавляем interceptor для автоматического добавления токена в заголовок запроса\n  instans.interceptors.request.use(config => {\n    const token = selectAccessToken(store.getState()); // Получаем токен из State\n    if (token) {\n      config.headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n};\nexport const dataAPI = {\n  getStudent() {\n    return instans.get(`students/`);\n  },\n  getCurses() {\n    return instans.get(`curses/`);\n  },\n  getSemester() {\n    return instans.get(`semester/`);\n  }\n};\nconst authAPI = {\n  authMe(refreshToken) {\n    let result = instans.post(`token/refresh/`, {\n      refresh: refreshToken\n    });\n    return result;\n  },\n  getAythUser() {\n    return instans.get(`user/`);\n  },\n  registerUser(fullName, login, email, password, repidPassword) {\n    let result = instans.post(`register/`, {\n      full_name: fullName,\n      username: login,\n      email,\n      password,\n      repidPassword\n    });\n    return result;\n  },\n  loginUser(username, password) {\n    let result = instans.post(\"token/obtain/\", {\n      username,\n      password\n    }, {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    return result;\n  },\n  logout() {\n    return instans.delete(\"auth/logout/\");\n  },\n  refreshToken(refreshToken) {\n    let result = instans.post(\"token/refresh/\", {\n      refresh: refreshToken\n    });\n    return result;\n  }\n};\nexport default authAPI;","map":{"version":3,"names":["axios","selectAccessToken","store","setStore","s","instans","create","withCredentials","baseURL","configureAxiosInterceptors","interceptors","request","use","config","token","getState","headers","error","Promise","reject","dataAPI","getStudent","get","getCurses","getSemester","authAPI","authMe","refreshToken","result","post","refresh","getAythUser","registerUser","fullName","login","email","password","repidPassword","full_name","username","loginUser","logout","delete"],"sources":["/home/dima_protasevich/Documents/PycharmProjects/student_app_test/frontend/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\nimport { selectAccessToken } from \"../reduser/selectors.js\";\n\nlet store;\n\nexport const setStore = (s) => {\n  store = s;\n};\n\nexport const instans = axios.create({\n    withCredentials: true,\n    baseURL: 'http://127.0.0.1:8000/api/'\n})\n\n\nexport const configureAxiosInterceptors = () => {\n  // Добавляем interceptor для автоматического добавления токена в заголовок запроса\n  instans.interceptors.request.use(\n    (config) => {\n      const token = selectAccessToken(store.getState()); // Получаем токен из State\n      if (token) {\n        config.headers[\"Authorization\"] = `Bearer ${token}`;\n      }\n\n      return config;\n    },\n    (error) => {\n      return Promise.reject(error);\n    }\n  );\n};\n\nexport const dataAPI = {\n  getStudent() {\n    return instans.get(`students/`);\n  },\n\n  getCurses() {\n    return instans.get(`curses/`);\n  },\n\n  getSemester() {\n    return instans.get(`semester/`);\n  },\n};\n\n\nconst authAPI = {\n  authMe(refreshToken) {\n    let result = instans.post(`token/refresh/`, { refresh: refreshToken });\n    return result;\n  },\n\n  getAythUser() {\n    return instans.get(`user/`);\n  },\n\n  registerUser(fullName, login, email, password, repidPassword) {\n    let result = instans.post(`register/`, {\n      full_name: fullName,\n      username: login,\n      email,\n      password,\n      repidPassword,\n    });\n    return result;\n  },\n\n  loginUser(username, password) {\n    let result = instans.post(\n      \"token/obtain/\",\n      { username, password },\n      { headers: { \"Content-Type\": \"application/json\" } }\n    );\n    return result;\n  },\n\n  logout() {\n    return instans.delete(\"auth/logout/\");\n  },\n\n  refreshToken(refreshToken) {\n    let result = instans.post(\"token/refresh/\", { refresh: refreshToken });\n    return result;\n  },\n}; \n\n\n\n\n\nexport default authAPI\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,iBAAiB,QAAQ,yBAAyB;AAE3D,IAAIC,KAAK;AAET,OAAO,MAAMC,QAAQ,GAAIC,CAAC,IAAK;EAC7BF,KAAK,GAAGE,CAAC;AACX,CAAC;AAED,OAAO,MAAMC,OAAO,GAAGL,KAAK,CAACM,MAAM,CAAC;EAChCC,eAAe,EAAE,IAAI;EACrBC,OAAO,EAAE;AACb,CAAC,CAAC;AAGF,OAAO,MAAMC,0BAA0B,GAAGA,CAAA,KAAM;EAC9C;EACAJ,OAAO,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAC7BC,MAAM,IAAK;IACV,MAAMC,KAAK,GAAGb,iBAAiB,CAACC,KAAK,CAACa,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;IACnD,IAAID,KAAK,EAAE;MACTD,MAAM,CAACG,OAAO,CAAC,eAAe,CAAC,GAAI,UAASF,KAAM,EAAC;IACrD;IAEA,OAAOD,MAAM;EACf,CAAC,EACAI,KAAK,IAAK;IACT,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAC9B,CACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMG,OAAO,GAAG;EACrBC,UAAUA,CAAA,EAAG;IACX,OAAOhB,OAAO,CAACiB,GAAG,CAAE,WAAU,CAAC;EACjC,CAAC;EAEDC,SAASA,CAAA,EAAG;IACV,OAAOlB,OAAO,CAACiB,GAAG,CAAE,SAAQ,CAAC;EAC/B,CAAC;EAEDE,WAAWA,CAAA,EAAG;IACZ,OAAOnB,OAAO,CAACiB,GAAG,CAAE,WAAU,CAAC;EACjC;AACF,CAAC;AAGD,MAAMG,OAAO,GAAG;EACdC,MAAMA,CAACC,YAAY,EAAE;IACnB,IAAIC,MAAM,GAAGvB,OAAO,CAACwB,IAAI,CAAE,gBAAe,EAAE;MAAEC,OAAO,EAAEH;IAAa,CAAC,CAAC;IACtE,OAAOC,MAAM;EACf,CAAC;EAEDG,WAAWA,CAAA,EAAG;IACZ,OAAO1B,OAAO,CAACiB,GAAG,CAAE,OAAM,CAAC;EAC7B,CAAC;EAEDU,YAAYA,CAACC,QAAQ,EAAEC,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,aAAa,EAAE;IAC5D,IAAIT,MAAM,GAAGvB,OAAO,CAACwB,IAAI,CAAE,WAAU,EAAE;MACrCS,SAAS,EAAEL,QAAQ;MACnBM,QAAQ,EAAEL,KAAK;MACfC,KAAK;MACLC,QAAQ;MACRC;IACF,CAAC,CAAC;IACF,OAAOT,MAAM;EACf,CAAC;EAEDY,SAASA,CAACD,QAAQ,EAAEH,QAAQ,EAAE;IAC5B,IAAIR,MAAM,GAAGvB,OAAO,CAACwB,IAAI,CACvB,eAAe,EACf;MAAEU,QAAQ;MAAEH;IAAS,CAAC,EACtB;MAAEpB,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB;IAAE,CACpD,CAAC;IACD,OAAOY,MAAM;EACf,CAAC;EAEDa,MAAMA,CAAA,EAAG;IACP,OAAOpC,OAAO,CAACqC,MAAM,CAAC,cAAc,CAAC;EACvC,CAAC;EAEDf,YAAYA,CAACA,YAAY,EAAE;IACzB,IAAIC,MAAM,GAAGvB,OAAO,CAACwB,IAAI,CAAC,gBAAgB,EAAE;MAAEC,OAAO,EAAEH;IAAa,CAAC,CAAC;IACtE,OAAOC,MAAM;EACf;AACF,CAAC;AAMD,eAAeH,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}